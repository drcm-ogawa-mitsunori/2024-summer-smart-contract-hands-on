# é–‹ç™ºç’°å¢ƒæ§‹ç¯‰ã—ã¦ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹

ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆå®Ÿè£…ãƒãƒ³ã‚ºã‚ªãƒ³2024å¤ ver.
ã€å®Ÿç¿’ã€‘é–‹ç™ºç’°å¢ƒæ§‹ç¯‰ã—ã¦ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹
ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚

æœ¬å®Ÿç¿’ã¯ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚„ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®å‰æçŸ¥è­˜ç„¡ã—ã«ã‚‚é–¢ã‚ã‚‰ãšã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ä½œæˆã—ã¦ã„ãŸã ãã¨ã„ã†éé…·ãªå†…å®¹ã¨ãªã£ã¦ãŠã‚Šã¾ã™ã€‚
ãã®ãŸã‚ã€ã“ã® README ã§ã¯é–‹ç™ºç’°å¢ƒæ§‹ç¯‰ã‹ã‚‰ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆä½œæˆã¾ã§ãƒ•ãƒ«ã‚µãƒãƒ¼ãƒˆã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚
ã“ã†ã„ã£ãŸé–‹ç™ºã«æ…£ã‚Œã¦ã„ã‚‹æ–¹ã¯ README ã‚’è¦‹ãªã„ã§ä¸€æ—¦ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã„ãŸã ãã€ä¸æ˜ãªã¨ã“ã‚ã ã‘å‚è€ƒã«ã™ã‚‹ã¨ã„ã†ä½¿ã„æ–¹ã‚‚ã‚¢ãƒªã ã¨æ€ã„ã¾ã™ã€‚



## ç›®çš„

å®Ÿéš›ã«æ‰‹ã‚’å‹•ã‹ã—ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«æŒ¯ã‚Œã‚‹äº‹ã§ã€ã“ã®å¾Œã®åº§å­¦ãŒã‚ˆã‚Šé ­ã«å…¥ã£ã¦ãã‚„ã™ããªã£ã¦ã‚‚ã‚‰ãˆã‚Œã°ãªã€ã¨ã„ã†ã®ãŒæ„å›³ã§ã™ã€‚



## ç’°å¢ƒ

- Node.js ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹
  - ç­†è€…ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ `v20.16.0` ã§ã™
- npm ãŒä½¿ãˆã‚‹
  - Node.js ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æŒã£ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
    - å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®ã‚·ã‚¹ãƒ†ãƒ ã§ã™
    - npm ã«ãŠã‘ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã¯ã€ä½•ã‹ã—ã‚‰ã®æ©Ÿèƒ½ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰ç¾¤ã¨è¦‹ã¦ã‚‚ã‚‰ãˆã‚Œã°ä¸€æ—¦å¤§ä¸ˆå¤«ã§ã™
  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãªã®ã§ã€Node.js ãŒå…¥ã£ã¦ã„ã‚Œã° npm ã‚‚ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã‹ã¨æ€ã„ã¾ã™
  - ç­†è€…ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ `10.8.2` ã§ã™
- ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ãŒä½¿ãˆã‚‹
  - Windows ã§ã¯ã€Œã‚³ãƒãƒ³ãƒ‰ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã€Mac ã§ã¯ã€Œã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã€ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ„ãƒ¼ãƒ«ã§ã™



## é–‹ç™º

### 0. Node.js ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã‚‚ã—ç’°å¢ƒãŒæ•´ã£ã¦ã„ãªã„å ´åˆã€ã¾ãšã¯ Node.js ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’å®Ÿæ–½ã—ã¾ã—ã‚‡ã†ã€‚
https://nodejs.org/ ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚
ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã„ãã¤ã‹ã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ãŒ LTS ã¨ä»˜ã„ã¦ã„ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚
LTS ã¯ Long Term Support ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æœ€æ–°ç‰ˆã§ã€é•·æœŸã‚µãƒãƒ¼ãƒˆãŒç´„æŸã•ã‚Œã¦ã„ã‚‹ãŸã‚ï¼ˆæ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ä¸­ã§ã¯ï¼‰æœ€ã‚‚å®‰å®šã—ã¦ã„ã¾ã™ã€‚

### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€ä½œæˆ

ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆé–‹ç™ºç¾å ´ã¨ã—ã¦ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚
ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã‚ãªã„ã§å¤§ä¸ˆå¤«ã§ã™ã€‚
ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã«ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã‚‹ãªã‚Šã€ã‚ã‚‹ã„ã¯åˆ¥ã®å ´æ‰€ã«ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã‚Šãªã‚Šã—ã¦ãã ã•ã„ã€‚
ä½œæˆã—ãŸã‚‰ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã‚’é–‹ãã€ãã®ãƒ•ã‚©ãƒ«ãƒ€ã¾ã§ç§»å‹•ã—ã¾ã—ã‚‡ã†ã€‚

```bash
# ä¾‹ : Mac ã§ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã« smart-contract ã¨ã„ã†ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã£ãŸå ´åˆ
$ cd ~/Desktop/smart-contract
$ pwd
  -> /Users/ogawa_mitsunori/Desktop/smart-contract
```

### 2. Hardhat ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Hardhat ã¨ã¯ã€ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆé–‹ç™ºãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
npm ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦æä¾›ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€npm ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
ã¾ãšã¯ã€npm ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®ç®¡ç†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ãŸã‚ã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ `npm init` ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```bash
$ npm init
This utility will walk you through creating a package.json file.
It only covers the most common items, and tries to guess sensible defaults.

See `npm help init` for definitive documentation on these fields
and exactly what they do.

Use `npm install <pkg>` afterwards to install a package and
save it as a dependency in the package.json file.

Press ^C at any time to quit.
package name: (01-create-first-smart-contract) 
```

ã“ã‚Œã¯ç®¡ç†ãƒ•ã‚¡ã‚¤ãƒ« `package.json` ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€è‡ªèº«ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†ã™ã‚‹ãŸã‚ã«ãã®åˆæœŸå€¤ã‚’å…¥åŠ›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
å…¨ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ä½¿ã£ã¦å¤§ä¸ˆå¤«ãªã®ã§ã€å…¨ã¦ Enter ã‚’æŠ¼ã—ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã«ã—ã¦ `package.json` ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚

```bash
# ä»¥ä¸‹å…¨ã¦ Enter ã—ã¦å¤§ä¸ˆå¤«ã§ã™
package name: (01-create-first-smart-contract) 
version: (1.0.0) 
description: 
entry point: (index.js) 
test command: 
git repository: 
keywords: 
author: 
license: (ISC)

# æœ€å¾Œã«ä»¥ä¸‹ã®ã‚ˆã†ãªç¢ºèªãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€Enter ã‚’æŠ¼ã—ã¦ package.json ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™
About to write to /Users/ogawa_mitsunori/Projects/drip/2024-summer-smart-contract-hands-on/01-create-first-smart-contract/package.json:

{
  "name": "01-create-first-smart-contract",
  "version": "1.0.0",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "",
  "license": "ISC",
  "description": ""
}


Is this OK? (yes)
```

`package.json` ä½œæˆå¾Œã€Hardhat ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ `npm i -D hardhat` ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚

```bash
$ npm i -D hardhat
npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
npm warn deprecated glob@7.2.0: Glob versions prior to v9 are no longer supported
npm warn deprecated glob@8.1.0: Glob versions prior to v9 are no longer supported

added 267 packages, and audited 268 packages in 24s

52 packages are looking for funding
  run `npm fund` for details

8 low severity vulnerabilities

To address all issues, run:
  npm audit fix

Run `npm audit` for details.
```

### 3. ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆé–‹ç™ºç’°å¢ƒä½œæˆ

Hardhat ã‚’ä½¿ã£ã¦ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆé–‹ç™ºç’°å¢ƒã‚’ä½œæˆã—ã¾ã™ã€‚
npm ã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ä½¿ã†ã«ã¯ `npx â—¯â—¯â—¯â—¯` ã‚³ãƒãƒ³ãƒ‰ã‚’æ‰“ã¡ã¾ã™ã€‚
ã¨ã„ã†ã‚ã‘ã§ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ `npx hardhat init` ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```bash
$ npx hardhat init
888    888                      888 888               888
888    888                      888 888               888
888    888                      888 888               888
8888888888  8888b.  888d888 .d88888 88888b.   8888b.  888888
888    888     "88b 888P"  d88" 888 888 "88b     "88b 888
888    888 .d888888 888    888  888 888  888 .d888888 888
888    888 888  888 888    Y88b 888 888  888 888  888 Y88b.
888    888 "Y888888 888     "Y88888 888  888 "Y888888  "Y888

ğŸ‘· Welcome to Hardhat v2.22.8 ğŸ‘·â€

? What do you want to do? â€¦ 
â¯ Create a JavaScript project
  Create a TypeScript project
  Create a TypeScript project (with Viem)
  Create an empty hardhat.config.js
  Quit
```

ã“ã“ã§ã¯ä¸Šã‹ã‚‰äºŒç•ªç›®ã® `Create a TypeScript project` ã‚’é¸æŠã—ã¾ã™ã€‚
ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ä¸Šä¸‹ã§ã‚«ãƒ¼ã‚½ãƒ«ã‚’åˆã‚ã›ã¦ Enter ã‚’æŠ¼ã—ã¾ã™ã€‚

```bash
âœ” Hardhat project root: Â· /Users/ogawa_mitsunori/Projects/drip/2024-summer-smart-contract-hands-on/01-create-first-smart-contract
âœ” Do you want to add a .gitignore? (Y/n) Â· y
âœ” Do you want to install this sample project's dependencies with npm (@nomicfoundation/hardhat-toolbox)? (Y/n) Â· y
```

ãã‚Œä»¥å¤–ã®é¸æŠè‚¢ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾ã§è‰¯ã„ã®ã§ã€å…¨ã¦ Enter ã‚’æŠ¼ã—ã¦é€²ã‚ã¦ãã ã•ã„ã€‚
ãã†ã™ã‚‹ã¨ hardhat toolbox ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå§‹ã¾ã‚‹ã®ã§ã—ã°ã‚‰ãå¾…ã¡ã¾ã™ã€‚

```bash
npm install --save-dev "@nomicfoundation/hardhat-toolbox@^5.0.0"
npm warn deprecated glob@5.0.15: Glob versions prior to v9 are no longer supported
npm warn deprecated glob@7.1.7: Glob versions prior to v9 are no longer supported

added 299 packages, and audited 567 packages in 36s

92 packages are looking for funding
  run `npm fund` for details

25 vulnerabilities (22 low, 3 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.

âœ¨ Project created âœ¨

See the README.md file for some example tasks you can run

Give Hardhat a star on Github if you're enjoying it! â­ï¸âœ¨

     https://github.com/NomicFoundation/hardhat
```

### 3. Counter ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆä½œæˆ

é–‹ç™ºç’°å¢ƒãŒæ•´ã£ãŸã®ã§ã€æœ€åˆã®ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
https://solidity-by-example.org/first-app/
ã“ã¡ã‚‰ã«ã‚ã‚‹ Counter ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚
contracts ãƒ•ã‚©ãƒ«ãƒ€ã®ä¸­ã« `Counter.sol` ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.24;

contract Counter {
    uint256 public count;

    // Function to get the current count
    function get() public view returns (uint256) {
        return count;
    }

    // Function to increment count by 1
    function inc() public {
        count += 1;
    }

    // Function to decrement count by 1
    function dec() public {
        // This function will fail if count = 0
        count -= 1;
    }
}
```

ä¸Šè¨˜ã¾ã§ã®æº–å‚™ãŒå‡ºæ¥ãŸã‚‰ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ `npx hardhat compile` ã‚’å®Ÿè¡Œã—ã€ä½œæˆã—ãŸ Counter ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦ EVM ãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã«å¤‰æ›ã—ã¾ã™ã€‚

```bash
$ npx hardhat compile
Generating typings for: 2 artifacts in dir: typechain-types for target: ethers-v6
Successfully generated 8 typings!
Compiled 2 Solidity files successfully (evm target: paris).
```

Successfully ã®è¡¨è¨˜ãŒå‡ºã¦ã„ã‚Œã°ã€ä»Šå›ã®å®Ÿç¿’ã¯å®Œäº†ã§ã™ã€‚
ãŠç–²ã‚Œæ§˜ã§ã—ãŸã€‚

### 4. Extra

æ¬¡ã‚¹ãƒ†ãƒƒãƒ—ã¨ã—ã¦ä»¥ä¸‹ã‚’é€²ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

- Solidity è¨€èªä»•æ§˜ã‚’çŸ¥ã‚‹
  - https://solidity-jp.readthedocs.io/ja/latest
- Counter ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’æ‹¡å¼µã™ã‚‹
  - count ã‚’ç›´æ¥å¤‰æ›´ã™ã‚‹ function ã‚’ä½œã£ã¦ã¿ã‚‹
  - åˆæœŸ count å€¤ã‚’æŒ‡å®šã§ãã‚‹ constructor ã‚’ä½œã£ã¦ã¿ã‚‹
  - count å¤‰æ•°ã‚’å¤–ã‹ã‚‰ç›´æ¥è¦‹ã‚Œãªã„ã‚ˆã†ã«ã—ã¦ã¿ã‚‹
    - è¦‹ãŸã„å ´åˆã¯ function get ã‚’å©ã‘ã° OK ãªã®ã§
  - count ã‚’æœ€å¾Œã«å¤‰æ›´ã—ãŸ address ã‚’ä¿æŒã—ã€å¤–ã‹ã‚‰è¦‹ã‚Œã‚‹ã‚ˆã†ã« function ã‚’ä½œã£ã¦ã¿ã‚‹
  - etc...
